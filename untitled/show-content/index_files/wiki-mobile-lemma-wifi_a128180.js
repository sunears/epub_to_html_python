define("wiki-mobile-lemma:widget/content/content/content.js",function(e,t){function a(){if(!S){x.q("youxuanLoad");var e,t=b("#J-vars").attr("data-subLemmas");b.ajax({type:"GET",url:"/api/proxyapi?tag=youxuan&lemma_title="+L+"&sublemmas="+t,success:function(t){x.q("youxuanLoadSuccess"),t=t.youxuan,t&&t.eid&&(200===t.eid?e=0:201===t.eid&&(e=1)),t&&t.ad_place_list&&t.ad_place_list.length>0?(b(".yx-container").html(t.ad_place_list[0].ad_place_data),b(".yx-container").show(),C=1,x.q("youxuanShowPV"),J.total<=5&&x.q("youxuanShowPVNoLoad"),J.page>=J.total-1&&x.q("youxuanLastScreenPV")):(b(window).off("scroll",p).on("scroll",p),J.page<J.total-1&&(b(".ui-refresh-down").show(),b(".yx-load-more").hide()),C=2)},error:function(){x.q("youxuanLoadError"),b(window).off("scroll",p).on("scroll",p),J.page<J.total-1&&(b(".ui-refresh-down").show(),b(".yx-load-more").hide()),C=2}})}}function o(){var e="android";navigator.userAgent.indexOf("iPhone")>-1&&(e="ios");var t;0==b("#J-vars").data("net")||1==b("#J-vars").data("net")?t="wf":2==b("#J-vars").data("net")?t="2g":3==b("#J-vars").data("net")?t="3g":4==b("#J-vars").data("net")&&(t="4g"),navigator.userAgent.indexOf("MicroMessenger")<=-1&&(x.q("appLoad"),b.ajax({type:"get",url:"/api/proxyapi?lemmaTitle="+b("#J-bottom-app").data("lemmatitle")+"&platform="+e+"&tag=baitong&network="+t+"&resolution="+screen.width+"x"+screen.height,dataType:"json",success:function(e){x.q("appLoadSuccess");var t="";if(e.baitong&&e.baitong.length>0){3===e.baitong.length&&b("#J-app-list").addClass("three-app-list");for(var a=0;a<e.baitong.length;a++)t+=1===e.baitong[a].isbaike?'<li class="app-item app-baike">':'<li class="app-item app-baitong">',t+='<a data-href="'+e.baitong[a].downloadUrl+'" class="app-desc">',t+='<img src="'+e.baitong[a].pic+'" alt="" class="app-logo">',t+='<div class="app-title">'+e.baitong[a].name+"</div></a></li>";b("#J-app-list").html(t),b("#J-bottom-app").show(),x.q("appPV")}},error:function(){x.q("appLoadError")}}))}function n(){b(".lazy-img").imglazyload()}function i(){var e=0,t=0,a='<div class="table-show-all"><span>展开全部</span>';a+='<em class="layout-icons layout-icons_down-arrow"></em></div>',b(".table-container").each(function(){if(!b(this).hasClass("tableScroll")){if(b("tr",b(this)).length>4){for(var o=4;o<b("tr",b(this)).length;o++)b(b("tr",b(this))[o]).addClass("tr-hide").addClass("J-toggle");b(this).append(a)}k++,b(this).attr("id","table"+k),T[k]=new y("#table"+k,{scrollX:!0,scrollY:!1,preventDefault:!1}),b(this).on("touchstart",function(a){e=a.touches[0].pageX,t=a.touches[0].pageY}),b(this).on("touchmove",function(a){var o=a.touches[0].pageX-e;e=a.touches[0].pageX;var n=a.touches[0].pageY-t;t=a.touches[0].pageY,Math.abs(o)>=Math.abs(n)&&a.preventDefault()}),b(this).addClass("tableScroll")}})}function s(){b(".table-container .table-show-all").live("click",function(){if(b(this).children("em").hasClass("layout-icons_down-arrow"))b(".J-toggle",b(this).parent()).removeClass("tr-hide"),b(this).children("em").removeClass("layout-icons_down-arrow").addClass("layout-icons_up-arrow"),b(this).children("span").text("收起");else{b(".J-toggle",b(this).parent()).addClass("tr-hide"),b(this).children("em").removeClass("layout-icons_up-arrow").addClass("layout-icons_down-arrow"),b(this).children("span").text("展开全部");var e=b(this).offset().top-240;window.scrollTo(0,e)}b(".tr-submodule").each(function(){"none"===b(b(this).children("td")[0]).css("display")&&b(this).hide()}),T[b(this).parent().attr("id").split("table")[1]].refresh()})}function l(){b(".table-toggle-button").live("tap",function(){b(b(this).children("em")[0]).hasClass("layout-icons_down-arrow")?(b(b(this).children("em")[0]).addClass("layout-icons_up-arrow").removeClass("layout-icons_down-arrow"),b(b(this).parent().next().children("td")).show(),b(b(this).parent().next()).show()):b(b(this).children("em")[0]).hasClass("layout-icons_up-arrow")&&(b(b(this).children("em")[0]).addClass("layout-icons_down-arrow").removeClass("layout-icons_up-arrow"),b(b(this).parent().next().children("td")).hide(),b(b(this).parent().next()).hide()),T[b(this).parent().parent().parent().parent().attr("id").split("table")[1]].refresh()}).live("touchstart",function(e){e.preventDefault()})}function r(){b(".table-container caption").each(function(){var e='<div class="table-before-title">'+b(this).text()+"</div>";b(b(this).parent().parent()).before(e),b(this).remove()})}function c(){function e(){var e=b("#anchor-"+window.location.href.split("#")[1]).offset().top-40;b("#J-sub-menu").length>0&&(e-=45),window.scrollTo(0,e)}var t=b(".ui-refresh-down"),n=b('<span class="ui-loading"></span>'),i=b('<span class="ui-refresh-label loadmore-off">点击加载更多</span>'),s=b('<span class="ui-refresh-label loadmore-on">正在加载</span>'),l='<span class="retry">重试</span>',r=b('<span class="ui-refresh-label loadmore-error">加载失败, 请稍候'+l+"</span>"),c=b('<span class="ui-refresh-label loadmore-offline">网络出错,请检查后'+l+"</span>");if(t.append(n).append(i).append(s).append(r).append(c),J.page=t.data("page"),J.page>9999&&(J.page=parseInt(J.page/1e4,10)),J.total=t.data("total"),J.newLemmaId=t.attr("data-newLemmaId"),b.os.ios&&parseInt(b.os.version,10)>5&&(document.documentElement.className+=" ios6"),J.page<J.total-1){if(b.os.ios){var d=!1;window.onpageshow=function(){J.scrollFlag=!0,b("#searchCon").length>0&&(b("#searchCon").css("display","none"),b("#wrapper").css("display","block"),J.isSearchShow=1)},window.addEventListener("touchstart",function(){J.scrollFlag&&(b(window).off("scroll",p).on("scroll",p),J.scrollFlag=!1,d=!0)},!1),setTimeout(function(){d||1===C||(b(window).off("scroll",p).on("scroll",p),J.scrollFlag=!1,d=!0)},600)}else b(window).on("scroll",p);b(".ui-refresh-down").tap(function(){b(this).hasClass("show-loading")||J.page<J.total-1&&u(J.page+1)}).on("touchstart",function(e){e.preventDefault()}),b(".yx-load-more").tap(function(){h(),p()}),b(".yx-load-more").on("touchstart",function(e){e.preventDefault()})}else window.onpageshow=function(){b("#searchCon").length>0&&(b("#searchCon").css("display","none"),b("#wrapper").css("display","block"),J.isSearchShow=1)},b(".ui-refresh-down").remove(),b(".after-content-wrapper").show(),b(".yx-load-more").hide(),a(),b("#J-other-content").show(),o(),x.q("lastScreenPV"),1===C&&x.q("youxuanLastScreenPV");window.addEventListener("pagehide",function(){sessionStorage.setItem(J.newLemmaId+"dataPage",J.page);var e=window.pageYOffset;sessionStorage.setItem(J.newLemmaId+"dataBookmark",e)});var f=sessionStorage.getItem(J.newLemmaId+"dataPage"),g=sessionStorage.getItem(J.newLemmaId+"dataBookmark");if(-1===window.location.href.indexOf("#"))if(f&&g>0){var w=parseInt(f,10);w>1&&(w=1e4*w+1),w>0?u(w,function(){window.scrollTo(0,g)},!0,"session"):window.scrollTo(0,g)}else window.scrollTo(0,0);else b(b("#anchor-"+window.location.href.split("#")[1])).length>0&&setTimeout(e,300)}function d(e){if("del"===e)b("#loading").remove();else{var t=document.createElement("div");t.id="loading",t.innerHTML='<div class="icon_load"></div> 加载中...',b("body").append(t),b("#loading").css({left:b(window).width()/2-25,top:b(window).height()/2-25+window.pageYOffset}),b("#loading").on("orientationchange",function(){b("#loading").css({left:b(window).width()/2-25,top:b(window).height()/2-25+window.pageYOffset})})}}function h(e){"del"===e?(b(".yx-load-more .yx-load-moreContenting").hide(),b(".yx-load-more .yx-load-moreContent").show()):(b(".yx-load-more .yx-load-moreContenting").show(),b(".yx-load-more .yx-load-moreContent").hide())}function p(){if(J.isLock)return!1;if("none"!==b(".body-wrapper").css("display")){var e=b(document).height()-b(window).height()-b(window).scrollTop();parseInt(e,10)<300&&J.page<J.total-1&&u(J.page+1)}}function u(e,t,s,l){if(J.isLock)return!1;J.isLock=!0,s&&d(),b(".ui-refresh-down")[0].className="ui-refresh-down show-loading","session"!==l&&x.q(window.location.href.indexOf("bk_fr=chain")>-1?"turnPageInlink":"turnPage");var c=J.lemmaUrl+"?st=3&ldr=1&bd_page_type=1&isNew=1&page="+e+"&net="+b("#J-vars").attr("data-net");"session"===l&&(c+="&turn_page=session"),b.ajax({type:"GET",url:c,timeout:15e3,success:function(l,c,u){s&&d("del"),b(".ui-refresh-down")[0].className="ui-refresh-down show-normal",u.onreadystatechange=null,b(".main-content").append(b(l).filter(".main-content").html()),e>9999&&(e=parseInt(e/1e4,10)),J.page=e,1===C?(b(window).off("scroll",p),h("del")):0===C&&(J.total>5&&J.page>3?(b(".ui-refresh-down").hide(),h("del"),b(".yx-load-more").show(),b(window).off("scroll",p),a()):J.total<=5&&J.page>=J.total-1&&a()),J.page>=J.total-1&&(b(".ui-refresh-down").hide(),b("#J-other-content").show(),b(".after-content-wrapper").show(),b(".yx-load-more").hide(),o(),x.q("lastScreenPV"),1===C&&x.q("youxuanLastScreenPV")),n(),i(),r(),J.isLock=!1,t&&"function"==typeof t&&t();var f=navigator.userAgent.toLowerCase();(f.indexOf("baiduboxapp")>-1||f.indexOf("baidubrowser")>-1)&&(setTimeout(initAlbumBorder,0),setTimeout(initImgBorder,0)),x.q(window.location.href.indexOf("bk_fr=chain")>-1?"turnPageInlinkSuccess":"turnPageSuccess"),x.q("totalPV"),b("#J-sub-menu-anchor").length>0&&x.q("moviePV"),b("#J-trip-img").length>0&&x.q("tripPV")},error:function(){b(".ui-refresh-down")[0].className=navigator.onLine?"ui-refresh-down show-error":"ui-refresh-down show-offline",J.isLock=!1}})}function f(){b(".quickNav-item").on("tap",function(){m(b(this))}),b(".quickNav-item").on("touchstart",function(e){e.preventDefault()})}function g(){var e=new y("#J-catalog-content",{scrollX:!1,scrollY:!0,preventDefault:!1});_.catalogScroll=e;var t=b(".catalog"),a=b(".model");b("#J-catalog-button").on("tap",function(){b(document.body).css("overflow","hidden"),a.addClass("show"),b("#J-catalog-tip").css("display","block"),setTimeout(function(){b("#J-catalog-tip").addClass("show")},200),t.show().removeClass("hide").addClass("show"),x.q("catalogBtnClick"),b("#J-trip-img").length>0&&x.q("tripCatalogBtnClick")}),b("#J-catalog-tip").on("tap",function(){b(document.body).css("overflow","visible"),a.removeClass("show"),b("#J-catalog-tip").removeClass("show").hide(),t.removeClass("show").addClass("hide")}),b(".catalog-item").on("tap",function(){b(this);b("#J-catalog-tip").trigger("tap"),m(b(this)),x.q("catalogUse"),b("#J-trip-img").length>0&&x.q(b(this).attr("data-anchor").indexOf("trip")>-1?"tripPgcCatalogUse":"tripUgcCatalogUse")}),a.on("tap",function(){b("#J-catalog-tip").trigger("tap")}),b(".catalog, .model, #J-catalog-button, #J-catalog-tip").on("touchstart",function(e){e.preventDefault()})}function w(e,t){var a=b(window).scrollTop(),o=e-a>0?1:-1,n=Math.abs(e-a);if(e!==a){t=t||800;var i=n/100;i*=o;var s=setInterval(function(){a+=i,n-=Math.abs(i),0>=n?(window.scrollTo(0,e),clearInterval(s)):window.scrollTo(0,a)},t/100)}}function m(e){var t=parseInt(e.data("page"),10),a=e.data("anchor");J.page=parseInt(J.page,10);var o=function(){if(b('a[name="'+a+'"]').length>0){var e=b('a[name="'+a+'"]').offset().top-40;b("#J-sub-menu").length>0&&(e-=45),w(e),b.os.ios&&setTimeout(function(){document.documentElement.style.width=b(window).width()+1+"px",setTimeout(function(){document.documentElement.style.width="100%"},1)},1)}};if(0===a&&w(0),"-1"===t)return void(b('a[name="'+a+'"]').length>0&&o());if(t<=J.page)return o(),!1;if(t>J.page+1){if(J.isLock)return!1;t=1e4*parseInt(t,10)+(J.page+1)}u(t,function(){b('a[name="'+a+'"]').length>0&&o()},!0)}function v(e,t){var a,o,n,i,s=0,l=function(){s=new Date,n=null,i=e.apply(a,o)};return function(){var r=new Date,c=t-(r-s);return a=this,o=arguments,0>=c?(clearTimeout(n),n=null,s=r,i=e.apply(a,o)):n||(n=setTimeout(l,c)),i}}var b=e("wiki-mobile-common:widget/lib/zepto/zepto.js"),y=e("wiki-mobile-common:widget/lib/iscroll/iscroll.min.js"),x=e("wiki-mobile-common:widget/util/nslog.js"),C=0,k=0,T=[],J={lemmaUrl:window.location.href.split("?")[0]},_={el:"",init:function(){this.el=b("#J-cardEnterprise").length>0?"#pgc-content .title":b(".buildingPgc").length>0?".buildingPgc .title":".main-content h2",0!==b(this.el).length&&this.bind()},topbarHeight:function(){return b(".topbar").height()},bind:function(){var e=this,t=function(){2===b(".seriesTitleBody").size()&&b(".seriesTitleBody").last().hasClass("seriesTitleBodyOn")||(e.get(),e.set())},a=v(t,200);b(window).on("touchmove scroll load",function(e){b(e.target).hasClass("catalog-item")||a()}),b(document).on("scrollStop",a)},k:[],v:[],get:function(){var e=this;if(e.k=[0],e.v=["百科名片"],"#pgc-content .title"===e.el){var t=b("#J-enterpriseInfo .title").offset().top-60;e.k.push(t),e.v.push("工商注册信息")}else if(".buildingPgc .title"===e.el){var t=b(".basicInfo").offset().top-60;e.k.push(t),e.v.push("基本信息")}if(b(e.el).each(function(){var t=b(this),a=t.html();if(!(b("#humanrel_container").length>0&&"相关人物"===a&&"none"===b("#humanrel_container").css("display"))){var o=t.offset().top-e.topbarHeight()-60;if(e.k.push(o),-1!==a.indexOf("分集剧情")&&b("#seriesTitleBody").length>0&&(b("#seriesTitleBody").attr("show")||(b(".seriesTitleBody").last().attr("show",!0).show().appendTo(t),a=t.html(),b("#seriesMain").appendTo("body"))),e.v.push(a),".main-content h2"===e.el){var n=t.prev().attr("name");if(b('li[data-anchor="'+n+'"]').next().hasClass("level2"))for(var i=b('li[data-anchor="'+n+'"]').next();i.hasClass("level2");){var s=b('a[name="'+i.data("anchor")+'"]');if(!(s.next().length>0))break;var l=s.next().offset().top-e.topbarHeight()-60;e.k.push(l),e.v.push(i.html()),i=i.next()}}}}),".main-content h2"!==e.el){var t=b(".main-content").offset().top-60;e.k.push(t),e.v.push("更多信息")}},set:function(){var e=document.body.scrollTop,t=this;if(0!==t.v.length){e+=t.topbarHeight();for(var a=0,o=t.k.length,n=0;o>n;n++)(e>t.k[n]&&e<t.k[n+1]||e>t.k[o-1])&&(a=n);var i=t.v[a];b("#seriesTitleBody").length>0&&(i=i.replace("选集","")),b("#J-catalog-content li").removeClass("current"),b("#J-catalog-content li").each(function(){var e=b(this);return b.trim(e.text())===b.trim(i)?(e.addClass("current"),void(e.prev().prev().length>0?t.catalogScroll.scrollToElement(e.prev().prev()[0],1,0,0):e.prev().length>0?t.catalogScroll.scrollToElement(e.prev()[0],1,0,0):t.catalogScroll.scrollToElement(e[0],1,0,0))):void 0})}}},L="",S=0;t.init=function(e){L=e.lemmaTitle,S=e.noWapAd,b(document).ready(function(){n(),i(),s(),l(),r(),c(),f(),g(),_.init()})}});
;define("wiki-mobile-lemma:widget/content/moduleContent/movie/movie.js",function(i,e,o){function t(){var i=n(n(".movie-item .pic")[0]).width(),e=Math.round(109*i/80);n(".movie-item .pic").css("height",e+"px")}function s(){n(".movie-item .item-list .name").each(function(){if(n(this).children("a").length>0){var i=n(n(this).children("a")[0]);if(n(this).siblings(".pic").children(".pic-link").length>0){var e=n(n(this).siblings(".pic").children(".pic-link")[0]);e.attr("href",i.attr("href")),e.children(".pic-link-text").html(i.text())}}})}var n=i("wiki-mobile-common:widget/lib/zepto/zepto.js"),l=!1,a=function(){return t(),s(),l?void(n(".show-all-movie").length>1&&n(".show-all-movie").eq(1).on("tap",function(){if(n(this).children("em").hasClass("layout-icons_down-arrow"))n(this).siblings(".movie-list").children(".J-toggle").removeClass("hide"),n(this).children("span").text("收起"),n(this).children("em").removeClass("layout-icons_down-arrow").addClass("layout-icons_up-arrow");else{n(this).siblings(".movie-list").children(".J-toggle").addClass("hide"),n(this).children("span").text("全部"),n(this).children("em").removeClass("layout-icons_up-arrow").addClass("layout-icons_down-arrow");var i=n(this).offset().top-240;window.scrollTo(0,i)}}).on("touchstart",function(i){i.preventDefault()})):(n(".show-all-movie").length>0&&(n(".show-all-movie").on("tap",function(){if(n(this).children("em").hasClass("layout-icons_down-arrow"))n(this).siblings(".movie-list").children(".J-toggle").removeClass("hide"),n(this).children("span").text("收起"),n(this).children("em").removeClass("layout-icons_down-arrow").addClass("layout-icons_up-arrow");else{n(this).siblings(".movie-list").children(".J-toggle").addClass("hide"),n(this).children("span").text("全部"),n(this).children("em").removeClass("layout-icons_up-arrow").addClass("layout-icons_down-arrow");var i=n(this).offset().top-240;window.scrollTo(0,i)}}).on("touchstart",function(i){i.preventDefault()}),l=!0),void n(".movie-list").on("orientationchange",function(){t()}))};o.exports=a});