define("wiki-mobile-lemma:widget/additionalContent/promotion/mix.js",function(e,t,i){var n=function(){var e={},t={},i=0,n=0,r=this,o=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q"];o=o.concat(["r","s","t","u","v","w","x","y","z"]),o=o.concat(["A","B","C","D","E","F","G","H","I","J","K"]),o=o.concat(["L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),this.mixed=function(){},this.getKey=function(t){return e[t]},this.mixedStyle=function(e){r.parseStyle(e)},this.insertStyle=function(e){var t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)},this.mixedHtml=function(e){return e=e.replace(/class=[\'\"](.[^\'\"]*)[\'\"]/gi,function(e,t){return'class="'+r.encodeString(t)+'"'}),e=e.replace(/id=[\'\"](.[^\'\"]*)[\'\"]/gi,function(e,t){return'id="'+r.encodeString(t)+'"'}),e=e.replace(/href=[\'\"](.[^\'\"]*)[\'\"]/gi,function(e,n){return t[i++]=n,'onclick="Mixedor.mixedOpen(this,'+(i-1)+')"'})},this.mixedOpen=function(e,i){e.getAttribute("target")&&"_blank"===e.getAttribute("target")?window.open(t[i]):window.location.href=t[i]},this.encode=function(t){return e[t]||(e[t]=a(t)),e[t]};var a=function(e){for(var t=e.length,i=[],r=0;t>r;r++)i.push(o[Math.floor(54*Math.random())]);return i.join("")+n++};this.encodeString=function(e){var t=null;if(e.indexOf(":")>-1){var i=e.split(":")[1];t=e.split(":")[0].split(" ")}else t=e.split(" ");for(var n="",r=0;r<t.length;r++){var o=t[r],a=o.indexOf(".")>-1?".":o.indexOf("#")>-1?"#":"";o=o.replace(a,"");var d=this.encode(o);n+=a+d,r<t.length-1&&(n+=" ")}return e.indexOf(":")>-1&&(n+=":"+i),n},this.parseStyle=function(e){var t=[],i={},n=0,o=0,a=!1,d=function(e,d){var s=e,c=new Image;c.src=s;var l=function(){if(c.width>0||c.height>0){if(i[d]="padding-top:"+c.height/c.width*100+"%",n++,a&&o===n){for(var e=0;o>e;e++)t=t.replace("adapt-img"+e,i[e]);r.insertStyle(t)}}else setTimeout(l,40)};l()};for(var s in e){for(var c=s.split(" "),l="",p=0;p<c.length;p++)l+=c[p].indexOf(".")>-1||c[p].indexOf("#")>-1?this.encodeString(c[p]):c[p],l+=" ";t.push(l+"{");for(var u in e[s])"adapt-img"===u?(t.push("display: block;"),t.push("background-image:url("+e[s][u]+");"),t.push("background-size: cover;"),t.push("background-repeat: no-repeat;"),t.push("adapt-img"+o++ +";"),d(e[s][u],o-1)):"display"===u&&"flex"===e[s][u]?(t.push("display:-webkit-box;"),t.push("display:-moz-box;"),t.push("display:-webkit-flex;"),t.push("display:flex;")):t.push(u+":"+e[s][u]+";");t.push("}")}if(t=t.join(""),a=!0,o===n){for(var p=0;o>p;p++)t=t.replace("adapt-img"+p,i[p]);r.insertStyle(t)}}};window.Mixedor=new n,i.exports=window.Mixedor});