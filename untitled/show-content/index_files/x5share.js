!function t(e,n,r){function a(s,i){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!i&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return a(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(t,e,n){var r=t("./tools"),a=r.Detect,o=t("./load/loadJs"),s=t("./load/report"),i={download_id:0,iosDownloadUrl:"itms-apps://itunes.apple.com/cn/app/qq-liu-lan-qi-shang-wang-zui/id370139302?mt=8",androidDownloadUrl:"",packageName:"com.tencent.mtt",qbWeb:"http://mb.qq.com/",openUrl:location.href,iosWxBackparm:",backparm=wechat://,iconid=6",iosQqBackparm:",backparm=mqq://whatever,iconid=3",androidWxBackparm:",packagename=com.tencent.mm",androidQqBackparm:",packagename=com.tencent.mobileqq",qqApiUrl:"http://pub.idqqimg.com/qqmobile/qqapi.js?_bid=154"},c={download:"2",pause:"3",complete:"4",install:"5",update:"12",cancel:"10"},l={start:function(t){if(a.isAndroid)try{a.isQQ&&mqq.app.downloadApp({appid:"10609",url:t.sDownLoadUrl||t.url,packageName:i.packageName,actionCode:c[t.actionKey],via:"",appName:"MqqBrowser"},function(e){l.loading(e,t)}),a.isWX&&l.WxStart(t)}catch(e){s.error({msg:e.message&&e.message.toString(),stack:e.stack&&e.stack.toString(),type:"download error"})}else{var n=document.createElement("a");n.href=i.iosDownloadUrl;var r=document.createEvent("Event");r.initEvent("click",!1,!0),n.dispatchEvent(r)}},WxStart:function(t){WeixinJSBridge.invoke("addDownloadTask",{task_name:"MqqBrowser",task_url:t.url,file_md5:t.md5},function(e){return e.download_id?(i.download_id=e.download_id,void l.loading(e,t)):void 0})},otherStart:function(t){var e=document.createElement("a");e.href="http://mdc.html5.qq.com?channel_id=10824";var n=document.createEvent("Event");n.initEvent("click",!1,!0),e.dispatchEvent(n)},loading:function(t,e){if(a.isQQ){if(t.state==c.download)try{e.progressFn&&e.progressFn(t.pro)}catch(n){s.error({msg:n.message&&n.message.toString(),stack:n.stack&&n.stack.toString(),type:"download progress"})}t.state==c.complete&&l.end(t,e),t.state==c.install&&l.install(t,e)}if(a.isWX){try{e.progressFn&&e.progressFn(t.pro)}catch(n){s.error({msg:n.message&&n.message.toString(),stack:n.stack&&n.stack.toString(),type:"download progress"})}try{WeixinJSBridge.on("wxdownload:state_change",function(t){"download_succ"==t.state?(r.set("download_id",i.download_id),l.end(t,e)):"download_fail"==t.state})}catch(n){s.error({msg:n.message&&n.message.toString(),stack:n.stack&&n.stack.toString(),type:"wx state_change error"})}}},end:function(t,e){a.isQQ&&e.endFn&&e.endFn(t),a.isWX&&(e.endFn&&e.endFn(t),l.install(t,e))},stop:function(t){if(a.isQQ)try{mqq.app.downloadApp({appid:"10604",url:t.sDownLoadUrl,packageName:i.packageName,actionCode:_self.qqDownloadState.pauseDownload,via:"",appName:"MqqBrowser"},function(e){t.stopFn&&t.stopFn(e)})}catch(e){s.error({msg:e.message&&e.message.toString(),stack:e.stack&&e.stack.toString(),type:"qq stop error"})}if(a.isWX)try{WeixinJSBridge.invoke("cancelDownloadTask",{download_id:i.download_id},function(e){t.stopFn&&t.stopFn(e)})}catch(e){s.error({msg:e.message&&e.message.toString(),stack:e.stack&&e.stack.toString(),type:"wx cancel error"})}},install:function(t,e){if(a.isQQ)try{mqq.app.downloadApp({appid:"10609",url:e.url,packageName:i.packageName,actionCode:c.install,via:"",appName:"MqqBrowser"},function(t){e.installFn&&e.installFn(t)})}catch(n){s.error({msg:n.message&&n.message.toString(),stack:n.stack&&n.stack.toString(),type:"qq install error"})}if(a.isWX&&r.get("download_id"))try{WeixinJSBridge.invoke("installDownloadTask",{download_id:r.get("download_id")},function(t){e.installFn&&e.installFn(t)})}catch(n){s.error({msg:n.message&&n.message.toString(),stack:n.stack&&n.stack.toString(),type:"wx install error"})}},queryStatus:function(t,e){if(a.isWX)if(r.get("download_id")){var n=r.get("download_id");try{WeixinJSBridge.invoke("queryDownloadTask",{download_id:n},function(e){"download_succ"==e.state?WeixinJSBridge.invoke("getInstallState",{packageUrl:"mttbrowser://",packageName:"com.tencent.mtt"},function(e){t("yes"==e.get_install_state?-1:0)}):t("downloading"==e.state?1:2)})}catch(o){s.error({msg:o.message&&o.message.toString(),stack:o.stack&&o.stack.toString(),type:"wx query install state error"})}}else t(2);else if(a.isQQ)try{if(a.isIos)return void t(2);mqq.app.downloadApp({appid:"10609",url:e.sDownLoadUrl,packageName:i.packageName,actionCode:c.download,via:"",appName:"MqqBrowser"},function(e){t(e.state==c.complete?0:e.state==c.loading?1:2)})}catch(o){s.error({msg:o.message&&o.message.toString(),stack:o.stack&&o.stack.toString(),type:"qq query install state error"})}else t(2)},checkQbInstall:function(t){function e(){try{WeixinJSBridge.invoke("getInstallState",{packageUrl:"mttbrowser://",packageName:"com.tencent.mtt"},function(e){t(/get_install_state:yes/gi.test(JSON.stringify(e))===!0?!0:!1)})}catch(e){t(!1),s.error({msg:e.message&&e.message.toString(),stack:e.stack&&e.stack.toString(),type:"wx check install error"})}}if(a.isQQ){var n="";return a.isIos===!0?n="mttbrowser":a.isAndroid&&(n="com.tencent.mtt"),void o(i.qqApiUrl,function(){try{mqq.app.isAppInstalled(n,function(e){t(1==e?!0:!1)})}catch(e){t(!1),s.error({msg:e.message&&e.message.toString(),stack:e.stack&&e.stack.toString(),type:"qq check install error"})}})}return a.isWX?void("object"==typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke?e():document.addEventListener("WeixinJSBridgeReady",e,!1)):void t(a.isQb?!0:!1)}};e.exports=l},{"./load/loadJs":6,"./load/report":9,"./tools":15}],2:[function(t,e,n){t("./load/share-init")},{"./load/share-init":11}],3:[function(t,e,n){var r="qq.com",a={getHostName:function(){return location.host},isQQHost:function(){var t=a.getHostName();return-1!==t.indexOf(r)?!0:!1}};e.exports=a},{}],4:[function(t,e,n){function r(t){i.loadCss(h.firstCss);var e='<div class="m-tips-wrap m-tips-wrap-first">\r\n		            <div class="m-tips-box">\r\n		                <div class="logo">\r\n		                    <img class="s_banner_picUrl" src="'+t.sBannerPicUrl+'"/>\r\n		                </div>\r\n		                <div class="tips-txt">\r\n		                    <h3 class="s_banner_title">'+t.sBannerTitle+'</h3>\r\n		                    <p class="s_banner_summary">'+t.sBannerSummary+'</p>\r\n		                </div>\r\n		                <div class="button">\r\n		                    <a class="qb_download" href="javascript:void(0)">\r\n		                        <span class="sc_txt"></span>\r\n		                        <span class="progress"></span>\r\n		                    </a>\r\n		                </div>\r\n		            </div>\r\n		    	</div>',n=document.createElement("div");n.className="uDisplay qb_download_banner",n.innerHTML=e,document.body.appendChild(n)}function a(t){i.loadCss(h.secondCss);var e='<div class="m-tips-wrap-first">\r\n		            <div class="m-tips-box">\r\n		                <div class="logo">\r\n		                    <img class="s_banner_picUrl" src="'+t.sBannerPicUrl+'"/>\r\n		                </div>\r\n		                <div class="tips-txt">\r\n		                    <h3 class="s_banner_title">'+t.sBannerTitle+'</h3>\r\n		                    <p class="s_banner_summary">'+t.sBannerSummary+'</p>\r\n		                </div>\r\n		                <div class="button">\r\n		                    <a class="qb_download" href="javascript:void(0)">\r\n		                        <span class="sc_txt"></span>\r\n		                        <span class="progress"></span>\r\n		                    </a>\r\n		                </div>\r\n		            </div>\r\n		    	</div>',n=document.createElement("div");n.className="uDisplay qb_download_banner",n.innerHTML=e,document.body.firstChild?document.body.insertBefore(n,document.body.firstChild):document.body.appendChild(n)}function o(t,e){t.innerHTML="下载",t.addEventListener("click",function(){u.log({r:e.sID,ch:e.ch||"001507",opertype:0,subtype:e.subtype||null}),setTimeout(function(){l.otherStart(e.sDownLoadUrl)},300)},!1)}function s(t){function e(){l.checkQbInstall(function(e){return e?s.innerHTML="打开":void l.queryStatus(function(t){s.innerHTML=0==t?"安装":1==t?"下载中":"下载"},t)}),s.addEventListener("click",function(){var e=s.innerHTML;("下载"==e||"暂停"==e)&&(l.start({actionKey:"download",md5:t.sMd5,url:t.sDownLoadUrl,progressFn:function(t){s.innerHTML="下载中",t?h.style.width=parseInt(t,10)+"%":h.classList.add("animate")},endFn:function(t){h.style.width="0%",s.innerHTML="安装"},installFn:function(t){h.style.width="0%",s.innerHTML="打开"}}),u.log({r:t.sID,ch:t.ch||"001507",opertype:0,subtype:t.subtype||null})),"下载中"==e&&l.stop({stopFn:function(t){s.innerHTML="暂停",i.Detect.isWX&&h.classList.toggle("animate")}}),"安装"==e&&l.install(void 0,{installFn:function(t,e){"打开"==s.innerHTML}}),"打开"==e&&(u.log({r:t.sID,ch:t.ch||"001507",opertype:1,subtype:t.subtype||null}),window.MTTBrowser?MTTBrowser.openQb({url:t.openUrl||window.location.href},function(t){}):m("http://res.imtt.qq.com/component/mttOpenQb.min.js",function(){MTTBrowser.openQb({url:t.openUrl||window.location.href},function(t){})}))},!1)}var n=!0;if(n=t.bShowShareCommBanner===!0?t.isShowBanner:!1,n!==!1){g.isQQHost()?a(t):r(t);var s=i.$$(".qb_download .sc_txt")||i.$$(".qb-special-info .sc_txt button"),h=i.$$(".qb_download .progress")||i.$$(".qb-special-process-wrap.progress");g.isQQHost()&&(c.isQQ||c.isWX)?(c.isWX&&f.wxStateChange(function(){e()}),e()):o(s,t)}0==t.ret&&p(d.extend(t,{title:t.sTitle,share_url:t.showUrl,desc:t.sSummary,image_url:t.sPicUrl,link:t.showUrl,imgUrl:t.sPicUrl,qq:!0,wx:!0,qb:!0,appId:t.appId||"wxe96fbdefcd9adbff",timestamp:t.timestamp,nonceStr:t.noncestr,state:0,signature:t.signature}),function(){},function(){})}var i=t("./tools"),c=i.Detect,l=t("./download"),d=t("./load/util"),p=t("./share").Share,u=t("./load/report"),m=t("./load/loadJs"),g=t("./filter"),f=t("./statechange"),h={firstCss:"http://res.imtt.qq.com/syneed/x5-share-first.css?v=201601131213",secondCss:"http://res.imtt.qq.com/component/x5-share-second.css?v=2016011314"};n.Init=s},{"./download":1,"./filter":3,"./load/loadJs":6,"./load/report":9,"./load/util":12,"./share":13,"./statechange":14,"./tools":15}],5:[function(t,e,n){var r,a=t("./util"),r=function(t){url="undefined"!=typeof t.url?t.url:"",succ="function"==typeof t.succ?t.succ:function(t){},fail="function"==typeof t.fail?t.fail:function(t){},type="undefined"!=typeof t.type?t.type:"GET",data="undefined"!=typeof t.data?t.data:"",time="undefined"!=typeof t.time?t.time:0;var e=-1,n=new XMLHttpRequest,r=this;if(n.onreadystatechange=function(){if(4==n.readyState)if(clearTimeout(e),200==n.status){var t=n.responseText;succ(t)}else fail(n.status)},!url)return fail(-1),null;if("GET"==type){if(r.data){var o=url.indexOf("?");url+=-1!=o?"object"==typeof data?"&"+a.toParams(data):"&"+data:"object"==typeof data?"?"+a.toParams(data):"?"+data}n.open("GET",url,!0),n.send(null)}else if("POST"==type){if("object"==typeof data)var s=a.toParams(data);else var s=data+"";n.open("POST",url,!0),n.send(s)}time>0&&(this.timer=setTimeout(function(){n.abort(),r.fail(-2)},time))};e.exports=r},{"./util":12}],6:[function(t,e,n){var r=function(t,e){var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.onload=r.onreadystatechange=r.onerror=function(){r&&r.readyState&&/^(?!(?:loaded|complete)$)/.test(r.readyState)||(r.onload=r.onreadystatechange=r.onerror=null,r.src="",r.parentNode.removeChild(r),r=null,e())},r.charset="utf-8",r.src=t;try{n.appendChild(r)}catch(a){}},a=function(t,e){if("[object Array]"===Object.prototype.toString.call(t)){this.suc=0,this.len=t.length;for(var n=this,a=0;a<t.length;a++)r(t[a],function(){if(n.suc++,n.suc==n.len)try{e()}catch(t){}})}else"string"==typeof t&&r(t,e)};e.exports=a},{}],7:[function(t,e,n){e.exports=t(6)},{}],8:[function(t,e,n){var r,a=t("./security");r={getKey:function(t,e){var n,r="string"==typeof e?e:window.location.href,o=new RegExp("(\\?|&)+"+t+"=([^&\\?]*)");return n=r.match(o),n?a.htmlEncode(decodeURIComponent(n[2])):""}},e.exports=r},{"./security":10}],9:[function(t,e,n){var r,a=t("./util"),o={},s="http://sc.qq.com/",i=function(){var t=/mqqbrowser/gi.test(window.navigator.userAgent),e="other";return/mobile.*qq/gi.test(window.navigator.userAgent)===!0?e="qq":/micromessenger/gi.test(window.navigator.userAgent)===!0?e="wx":t&&(e="qb"),e}();r={request:function(t){if(t){var e=(new Date).getTime(),n=new Image;t+="&rand="+(e+Math.random()),o["--IMAGE"+e]=n,n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,o["--IMAGE"+e]=null,n=null},n.src=t}},_log:function(t){var e,n=t&&t.url||s+"fx/report",r=n.indexOf("?");e=-1!=r?"&"+a.toParams(t):"?"+a.toParams(t),this.request(n+e)},log:function(t){var e={r:t.sID,ch:t.ch||"001507",src:i,opertype:t.opertype||0,subtype:t.subtype||null,url:s+"fx/report",rand:Date.now()+""+Math.random()},n=a.extend(t,e);r._log(n)},error:function(t){var e={url:s+"fx/err"},n=a.extend(t,e);this.log(n)}},e.exports=r},{"./util":12}],10:[function(t,e,n){var r,a={lt:/</g,gt:/>/g,amp:/&/g,quot:/"/g,"#39":/'/g,"#61":/=/g,"#96":/`/g};r={htmlEncode:function(t){return"string"!=typeof t?t:t.replace(a.amp,"&amp;").replace(a.gt,"&gt;").replace(a.lt,"&lt;").replace(a.quot,"&quot;").replace(a["#39"],"&#39;")}},e.exports=r},{}],11:[function(t,e,n){var r,a=t("./param"),o=t("./ajax"),s=(t("./loadjs"),t("./report")),i=t("../tools"),c=i.Detect,l=t("../init").Init,d={id:a.getKey("sc_id")||-1,href:window.location.href,serverUrl:"http://sc.qq.com/fx/share2nd"};r={asyncCallback:function(t){o({url:d.serverUrl,data:{sc_id:d.id,url:encodeURIComponent(d.href)},succ:function(e){var n="string"==typeof e?JSON.parse(e):e,r=n.ret;if(n.data)for(var a in t)n.data[a]=t[a];n.data.ret=r,l(n.data)},fail:function(t){s.error({action:"share",type:"exception",message:t}),console.log(t)}})},run:function(t){var e=c.isQb,n="other";n=c.isQQ?"qq":c.isWX?"wx":e?"qb":"other","qb"!=n&&(-1!=d.id?r.asyncCallback(t):console.log("没有分享授权"))},report:function(t){t=t||{},t.r=t.r||d.id,s.log(t)}},window.SQB=window.SQB||{},window.SQB.run=r.run,window.SQB.report=r.report,e.exports=r},{"../init":4,"../tools":15,"./ajax":5,"./loadjs":7,"./param":8,"./report":9}],12:[function(t,e,n){var r={toObject:function(t){var e,r,a,o,s={};return"object"===n.type(t)?t:""===t?{}:(e=String(t).replace("?","").replace("#","").split("&"),e.forEach(function(t){r=t.split("="),a=r[0],o=r.slice(1).join("="),s[decodeURIComponent(a)]=decodeURIComponent(o)}),s)},toParams:function(t){var e,n,r=[];if("string"==typeof t)return t;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],e=typeof n,("object"===e||"array"===e)&&(n=JSON.stringify(n)),r.push(a+"="+encodeURIComponent(n)));return r.join("&")},extend:function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}};e.exports=r},{}],13:[function(t,e,n){function r(t,e,n){a.Detect.isQQ&&t.qq&&1==t.qq?s(c.qq.script,function(){try{l(t,e,n)}catch(r){i.error({msg:r.message&&r.message.toString(),stack:r.stack&&r.stack.toString(),type:"qq share error"})}}):a.Detect.isWX&&t.wx&&1==t.wx?s(c.wx.script,function(){try{d(t,e,n)}catch(r){i.error({msg:r.message&&r.message.toString(),stack:r.stack&&r.stack.toString(),type:"wx share error"})}}):a.Detect.isQb&&t.qb&&1==t.qb&&s(c.qb.script,function(){try{p(t,e,n)}catch(r){i.error({msg:r.message&&r.message.toString(),stack:r.stack&&r.stack.toString(),type:"qb share error"})}})}var a=t("./tools"),o=t("./load/ajax"),s=t("./load/loadJs"),i=t("./load/report"),c={qq:{script:"http://pub.idqqimg.com/qqmobile/qqapi.js?_bid=152"},wx:{script:"http://res.wx.qq.com/open/js/jweixin-1.0.0.js",getTokenUrl:"http://act.html5.qq.com/red_packet?p=JsApi"},qb:{script:"http://jsapi.qq.com/get?api=app.share"},mttBrowser:"http://pms.mb.qq.com/index?aid=game&cid=openQbSdk_copy"},l=function(t,e,n){var r={url:t.url,title:t.title||"微信热文---发现最火的",desc:t.desc||"我在看QQ浏览器微信热文【热文】频道，分享给你，快来看！",image_url:t.image_url||"http://res.imtt.qq.com///syneed/share_wechat.png",share_url:window.location.href,suc:e,err:n};mqq.ui.setOnShareHandler(function(t){r.share_type=t,r.back=!0,mqq.ui.shareMessage(r,function(t){0===t.retCode?e(0):n(1)})})},d=function(t,e,n){({title:t.title,link:t.url,desc:t.desc,img:t.img,success:e,cancel:n});o({url:"http://sc.qq.com/fx/getToken",type:"GET",data:{url:window.location.href,p:"initjssdk",appId:t.appId},succ:function(r){var a=JSON.parse(r),o={debug:!1,appId:a.appid,timestamp:a.timestamp-0,nonceStr:a.noncestr,signature:a.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]};wx.config(o),wx.ready(function(){wx.onMenuShareTimeline({title:t.title,link:t.url,imgUrl:t.imgUrl,success:e,cancel:n}),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.url,imgUrl:t.imgUrl,success:e,cancel:n}),wx.onMenuShareQQ({title:t.title,desc:t.desc,link:t.url,imgUrl:t.imgUrl,success:function(){e&&e()},cancel:function(){n&&n()}}),wx.onMenuShareWeibo({title:t.title,desc:t.desc,link:t.url,imgUrl:t.imgUrl,success:e,cancel:n})})},fail:function(t){}})},p=function(t,e,n){({title:t.title||"微信热文---发现最火的",url:t.url,desc:t.desc||"我在看QQ浏览器微信热文【热文】频道，分享给你，快来看！",img_title:t.img_title||"浏览器分享图片辩题",image_url:t.img||"http://res.imtt.qq.com///syneed/share_wechat.png",share_type:0,cus_txt:t.cus_txt||"",suc:e,err:n})};n.Share=r},{"./load/ajax":5,"./load/loadJs":6,"./load/report":9,"./tools":15}],14:[function(t,e,n){var r=(t("./load/loadJs"),{wxStateChange:function(t){function e(){WeixinJSBridge.on("activity:state_change",function(e){if(e&&"onResume"==e.state)try{t&&t()}catch(n){console.log(n.message)}})}"object"==typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke?e():document.addEventListener("WeixinJSBridgeReady",e,!1)}});e.exports=r},{"./load/loadJs":6}],15:[function(t,e,n){var r=window.navigator.userAgent,a=/MicroMessenger/i.test(r),o=/ QQ\//i.test(r),s=/Qzone/i.test(r),i=/ TBS\//i.test(r),c=(/ MiniQB\//i.test(r),!(a||o||s||i)),l=/MQQBrowser/i.test(r)&&c,d={isAndroid:/android/gi.test(r),isIos:/iphone|ipod/gi.test(r),isQb:l,isQQ:o,isWX:a},p=function(){return d.isQb?"qb":d.isQQ?"qq":d.isWX?"wx":"other"},u=function(t){var e=document.createElement("link");e.href=t,e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)};e.exports={Detect:d,pageStatus:p,loadCss:u,get:function(t){return window.localStorage.getItem(t)},set:function(t,e){window.localStorage.setItem(t,e)},$:function(t){return document.getElementById(t)},$$:function(t){return document.querySelector(t)},$$$:function(t){return document.querySelectorAll(t)}}},{}]},{},[2]);